__set_project()
set(__OUTPUT_NAME_BASE spirv-cross-)
if (UNIX)
    set(__OUTPUT_NAME_BASE lib${__OUTPUT_NAME_BASE})
endif ()
set(__SLIB_PREFIX ${PROJECT_BINARY_DIR}/install/lib/${__OUTPUT_NAME_BASE})
set(__CORE_SLIB_PREFIX ${PROJECT_BINARY_DIR}/install/lib/${__OUTPUT_NAME_BASE}core)
set(__CORE_SLIB_R ${__CORE_SLIB_PREFIX}${__AE_SLIB_SUFFIX})
set(__CORE_SLIB_D ${__CORE_SLIB_PREFIX}d${__AE_SLIB_SUFFIX})
set(__GLSL_SLIB_PREFIX ${PROJECT_BINARY_DIR}/install/lib/${__OUTPUT_NAME_BASE}glsl)
set(__GLSL_SLIB_R ${__GLSL_SLIB_PREFIX}${__AE_SLIB_SUFFIX})
set(__GLSL_SLIB_D ${__GLSL_SLIB_PREFIX}d${__AE_SLIB_SUFFIX})
set(__MSL_SLIB_PREFIX ${PROJECT_BINARY_DIR}/install/lib/${__OUTPUT_NAME_BASE}msl)
set(__MSL_SLIB_R ${__MSL_SLIB_PREFIX}${__AE_SLIB_SUFFIX})
set(__MSL_SLIB_D ${__MSL_SLIB_PREFIX}d${__AE_SLIB_SUFFIX})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_NAME ${PROJECT_NAME})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_INCLUDE ${PROJECT_BINARY_DIR}/install/include)
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_CORE_SLIB ${__CORE_SLIB_PREFIX}$<$<CONFIG:Debug>:d>${__AE_SLIB_SUFFIX})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_CORE_SLIB_R ${__CORE_SLIB_R})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_CORE_SLIB_D ${__CORE_SLIB_D})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_GLSL_SLIB ${__GLSL_SLIB_PREFIX}$<$<CONFIG:Debug>:d>${__AE_SLIB_SUFFIX})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_GLSL_SLIB_R ${__GLSL_SLIB_R})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_GLSL_SLIB_D ${__GLSL_SLIB_D})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_MSL_SLIB ${__MSL_SLIB_PREFIX}$<$<CONFIG:Debug>:d>${__AE_SLIB_SUFFIX})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_MSL_SLIB_R ${__MSL_SLIB_R})
set_property(GLOBAL PROPERTY __PROJECT_SPIRV_CROSS_MSL_SLIB_D ${__MSL_SLIB_D})

include(ExternalProject)

__create_external_project_cmake_args(__CMAKE_ARGS)

ExternalProject_Add(
    ${PROJECT_NAME}
    PREFIX ${PROJECT_BINARY_DIR}
    GIT_REPOSITORY https://github.com/KhronosGroup/SPIRV-Cross.git
    GIT_TAG 2020-01-16
    GIT_SHALLOW 1
    GIT_PROGRESS 1
    TMP_DIR tmp
    STAMP_DIR stamp
    DOWNLOAD_DIR download
    INSTALL_DIR install
    SOURCE_DIR src
    BINARY_DIR ${__BUILD_DIR}
    UPDATE_COMMAND ""
    BUILD_BYPRODUCTS 
        ${__CORE_SLIB_R}
        ${__CORE_SLIB_D}
        ${__GLSL_SLIB_R}
        ${__GLSL_SLIB_D}
        ${__MSL_SLIB_R}
        ${__MSL_SLIB_D}
    CMAKE_ARGS
        -DSPIRV_CROSS_ENABLE_TESTS=OFF
        -DCMAKE_SHARED_LIBRARY_PREFIX=${CMAKE_SHARED_LIBRARY_PREFIX}
        -DCMAKE_STATIC_LIBRARY_PREFIX=${CMAKE_STATIC_LIBRARY_PREFIX}
        ${__CMAKE_ARGS}
)

set_property(TARGET ${PROJECT_NAME} PROPERTY FOLDER ${__AE_EXTERNAL_FOLDER_NAME})